<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TradingView Dashboard — Separate Price + RSI Charts</title>
  <style>
    :root{--bg:#ffffff;--card:#f9f9f9;--muted:#333333;--border:rgba(0,0,0,.1)}
    html,body{height:100%;margin:0;background:var(--bg);color:#111;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}
    .page{display:flex;flex-direction:column;gap:14px;padding:16px;height:100%;box-sizing:border-box}
    .controls{display:flex;flex-wrap:wrap;gap:10px;align-items:center;background:var(--card);border:1px solid var(--border);border-radius:14px;padding:10px 12px}
    .controls label{font-size:12px;opacity:.9}
    select,button{background:#f0f0f0;color:#111;border:1px solid var(--border);border-radius:10px;padding:6px 8px;font-size:13px}
    button{cursor:pointer}
    .row2,.row3{display:grid;gap:16px}
    .row2{grid-template-columns:1fr;}
    .row3{grid-template-columns:1fr;}
    @media(min-width:900px){.row2{grid-template-columns:1fr 1fr}}
    @media(min-width:1200px){.row3{grid-template-columns:1fr 1fr 1fr}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:0 6px 20px rgba(0,0,0,.1);padding:10px;display:flex;flex-direction:column}
    .card h2{font-size:14px;margin:0 0 6px;color:var(--muted);font-weight:600;letter-spacing:.2px}
    .tvwrap{position:relative;flex:1;min-height:480px}
    .note{opacity:.75;font-size:11px;margin-top:6px}
    a.link{color:#1a56db;text-decoration:none}
  </style>
</head>
<body>
  <div class="page">
    <div class="controls">
      <label for="global-interval">Interval:</label>
      <select id="global-interval">
        <option value="60">1h</option>
        <option value="120" selected>2h</option>
        <option value="240">4h</option>
        <option value="D">1d</option>
        <option value="W">1w</option>
      </select>
      <label for="global-theme">Theme:</label>
      <select id="global-theme">
        <option value="dark">Dark</option>
        <option value="light" selected>Light</option>
      </select>
      <button id="apply-all">Apply to all</button>
    </div>

    <!-- Row 1: BTCUSD, MSTR -->
    <div class="row2" id="row1"></div>

    <!-- Row 2: ETHUSD, BMNR -->
    <div class="row2" id="row2"></div>

    <!-- Remaining in rows of 3 -->
    <div class="row3" id="row3"></div>

    <div class="note">Layout: Row 1 = <b>BTCUSD</b> &amp; <b>MSTR</b>. Row 2 = <b>ETHUSD</b> &amp; <b>BMNR</b>. Remaining tickers render in a 3‑column grid. Each chart shows <b>Price (candles) + RSI</b>. Default theme is <b>light</b>. Use the controls to change interval/theme across all charts.</div>
  </div>

  <script>
    const ROW1 = [
      { id: 'btcusd', title: 'BTCUSD — Price + RSI', symbol: 'BTCUSD' },
      { id: 'mstr',   title: 'MSTR — Price + RSI',   symbol: 'NASDAQ:MSTR' }
    ];

    const ROW2 = [
      { id: 'ethusd', title: 'ETHUSD — Price + RSI', symbol: 'ETHUSD' },
      { id: 'bmnr',   title: 'BMNR — Price + RSI',   symbol: 'BMNR' }
    ];

    const ROW3 = [
      { id: 'tsla', title: 'TSLA — Price + RSI', symbol: 'NASDAQ:TSLA' },
      { id: 'hood', title: 'HOOD — Price + RSI', symbol: 'NASDAQ:HOOD' },
      { id: 'crcl', title: 'CRCL — Price + RSI', symbol: 'CRCL' },
      { id: 'tsm',  title: 'TSM — Price + RSI',  symbol: 'NYSE:TSM' },
      { id: 'team', title: 'TEAM — Price + RSI', symbol: 'NASDAQ:TEAM' },
      { id: 'figr', title: 'FIGR — Price + RSI', symbol: 'FIGR' }
    ];

    function createCard(cfg){
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `<h2>${cfg.title}</h2>
        <div class="tvwrap">
          <div class="tradingview-widget-container" style="height:100%;width:100%">
            <div class="tradingview-widget-container__widget" style="height:100%;width:100%"></div>
            <div class="tradingview-widget-copyright" style="padding-top:6px">
              <a class="link" href="https://www.tradingview.com/symbols/${encodeURIComponent((cfg.symbol||'').replace(':','-'))}/" rel="noopener nofollow" target="_blank"><span>Chart by TradingView</span></a>
            </div>
          </div>
        </div>`;
      return card;
    }

    function attachWidget(container, cfg, interval, theme){
      const script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js';
      const conf = {
        autosize: true,
        symbol: cfg.symbol,
        interval: interval,
        timezone: 'Etc/UTC',
        theme: theme,
        style: '1', // candles
        locale: 'en',
        hide_top_toolbar: false,
        hide_side_toolbar: true,
        hide_legend: false,
        hide_volume: false,
        withdateranges: false,
        allow_symbol_change: true,
        calendar: false,
        details: false,
        backgroundColor: theme === 'dark' ? '#121215' : '#ffffff',
        gridColor: theme === 'dark' ? 'rgba(255,255,255,0.06)' : 'rgba(46,46,46,0.06)',
        studies: ['STD;RSI']
      };
      script.innerHTML = JSON.stringify(conf, null, 2);
      container.appendChild(script);
    }

    function renderRow(rowId, items){
      const host = document.getElementById(rowId);
      host.innerHTML = '';
      const interval = document.getElementById('global-interval').value;
      const theme = document.getElementById('global-theme').value;
      items.forEach(cfg => {
        const card = createCard(cfg);
        host.appendChild(card);
        const container = card.querySelector('.tradingview-widget-container');
        attachWidget(container, cfg, interval, theme);
      });
    }

    function renderAll(){
      renderRow('row1', ROW1);
      renderRow('row2', ROW2);
      renderRow('row3', ROW3);
    }

    document.getElementById('apply-all').addEventListener('click', renderAll);
    // initial
    renderAll();
  </script>
</body>
</html>
